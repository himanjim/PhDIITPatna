version: "3.9"

networks:
  benchnet:
    name: benchnet

services:

  # ==================== ORDERERS (Raft N=5) ====================
  orderer1.eci1.bench.local:
    image: hyperledger/fabric-orderer:3.1.1
    container_name: orderer1.eci1.bench.local
    environment:
      ORDERER_GENERAL_LISTENADDRESS: 0.0.0.0
      ORDERER_GENERAL_LISTENPORT: "7050"
      ORDERER_GENERAL_LOCALMSPID: ECI1MSP
      ORDERER_GENERAL_LOCALMSPDIR: /var/hyperledger/msp
      ORDERER_GENERAL_TLS_ENABLED: "true"
      ORDERER_GENERAL_TLS_PRIVATEKEY: /var/hyperledger/tls/server.key
      ORDERER_GENERAL_TLS_CERTIFICATE: /var/hyperledger/tls/server.crt
      ORDERER_GENERAL_TLS_ROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
      ORDERER_ADMIN_LISTENADDRESS: 0.0.0.0:9443
      ORDERER_ADMIN_TLS_ENABLED: "true"
      ORDERER_ADMIN_TLS_CERTIFICATE: /var/hyperledger/admin-tls/server.crt
      ORDERER_ADMIN_TLS_PRIVATEKEY: /var/hyperledger/admin-tls/server.key
      ORDERER_ADMIN_TLS_CLIENTROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
        #ORDERER_ADMIN_TLS_CLIENTROOTCAS: "[/var/hyperledger/orderer/tlsca/all-orderer-admin-tlscas.bundle.pem]"
      ORDERER_ADMIN_TLS_CLIENTAUTHREQUIRED: "true"
      ORDERER_CHANNELPARTICIPATION_ENABLED: "true"
      ORDERER_GENERAL_BOOTSTRAPMETHOD: none
      ORDERER_METRICS_PROVIDER: prometheus
      ORDERER_OPERATIONS_LISTENADDRESS: 0.0.0.0:9444
      ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY: /var/hyperledger/tls/server.key
      ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE: /var/hyperledger/tls/server.crt
      ORDERER_GENERAL_CLUSTER_ROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
    ports:
      - "7050:7050"   # client/orderer endpoint
      - "7443:9443"   # admin endpoint (osnadmin)
    volumes:
      # MSP & TLS for this orderer
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci1.bench.local/orderers/orderer1.eci1.bench.local/msp:/var/hyperledger/msp
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci1.bench.local/orderers/orderer1.eci1.bench.local/tls:/var/hyperledger/tls
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci1.bench.local/orderers/orderer1.eci1.bench.local/tls:/var/hyperledger/admin-tls
      # Mount all 5 TLS CA roots to deterministic paths
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci1.bench.local/orderers/orderer1.eci1.bench.local/tls/ca.crt:/var/hyperledger/tls/eci1-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci2.bench.local/orderers/orderer2.eci2.bench.local/tls/ca.crt:/var/hyperledger/tls/eci2-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp1.bench.local/orderers/orderer3.opp1.bench.local/tls/ca.crt:/var/hyperledger/tls/opp1-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp2.bench.local/orderers/orderer4.opp2.bench.local/tls/ca.crt:/var/hyperledger/tls/opp2-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/civ1.bench.local/orderers/orderer5.civ1.bench.local/tls/ca.crt:/var/hyperledger/tls/civ1-ca.crt:ro
        #      - ./stacks/stack-v31-raft/channel-artifacts/all-orderer-admin-tlscas.bundle.pem:/var/hyperledger/orderer/tlsca/all-orderer-admin-tlscas.bundle.pem:ro
    networks: [benchnet]

  orderer2.eci2.bench.local:
    image: hyperledger/fabric-orderer:3.1.1
    container_name: orderer2.eci2.bench.local
    environment:
      ORDERER_GENERAL_LISTENADDRESS: 0.0.0.0
      ORDERER_GENERAL_LISTENPORT: "8050"
      ORDERER_GENERAL_LOCALMSPID: ECI2MSP
      ORDERER_GENERAL_LOCALMSPDIR: /var/hyperledger/msp
      ORDERER_GENERAL_TLS_ENABLED: "true"
      ORDERER_GENERAL_TLS_PRIVATEKEY: /var/hyperledger/tls/server.key
      ORDERER_GENERAL_TLS_CERTIFICATE: /var/hyperledger/tls/server.crt
      ORDERER_GENERAL_TLS_ROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
      ORDERER_ADMIN_LISTENADDRESS: 0.0.0.0:9443
      ORDERER_ADMIN_TLS_ENABLED: "true"
      ORDERER_ADMIN_TLS_CERTIFICATE: /var/hyperledger/admin-tls/server.crt
      ORDERER_ADMIN_TLS_PRIVATEKEY: /var/hyperledger/admin-tls/server.key
      ORDERER_ADMIN_TLS_CLIENTROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
      ORDERER_CHANNELPARTICIPATION_ENABLED: "true"
      ORDERER_ADMIN_TLS_CLIENTAUTHREQUIRED: "true"
      ORDERER_GENERAL_BOOTSTRAPMETHOD: none
      ORDERER_METRICS_PROVIDER: prometheus
      ORDERER_OPERATIONS_LISTENADDRESS: 0.0.0.0:9444
      ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY: /var/hyperledger/tls/server.key
      ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE: /var/hyperledger/tls/server.crt
      ORDERER_GENERAL_CLUSTER_ROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
    ports:
      - "8050:8050"
      - "8443:9443"
    volumes:
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci2.bench.local/orderers/orderer2.eci2.bench.local/msp:/var/hyperledger/msp
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci2.bench.local/orderers/orderer2.eci2.bench.local/tls:/var/hyperledger/tls
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci2.bench.local/orderers/orderer2.eci2.bench.local/tls:/var/hyperledger/admin-tls
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci1.bench.local/orderers/orderer1.eci1.bench.local/tls/ca.crt:/var/hyperledger/tls/eci1-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci2.bench.local/orderers/orderer2.eci2.bench.local/tls/ca.crt:/var/hyperledger/tls/eci2-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp1.bench.local/orderers/orderer3.opp1.bench.local/tls/ca.crt:/var/hyperledger/tls/opp1-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp2.bench.local/orderers/orderer4.opp2.bench.local/tls/ca.crt:/var/hyperledger/tls/opp2-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/civ1.bench.local/orderers/orderer5.civ1.bench.local/tls/ca.crt:/var/hyperledger/tls/civ1-ca.crt:ro
    networks: [benchnet]

  orderer3.opp1.bench.local:
    image: hyperledger/fabric-orderer:3.1.1
    container_name: orderer3.opp1.bench.local
    environment:
      ORDERER_GENERAL_LISTENADDRESS: 0.0.0.0
      ORDERER_GENERAL_LISTENPORT: "9050"
      ORDERER_GENERAL_LOCALMSPID: OPP1MSP
      ORDERER_GENERAL_LOCALMSPDIR: /var/hyperledger/msp
      ORDERER_GENERAL_TLS_ENABLED: "true"
      ORDERER_GENERAL_TLS_PRIVATEKEY: /var/hyperledger/tls/server.key
      ORDERER_GENERAL_TLS_CERTIFICATE: /var/hyperledger/tls/server.crt
      ORDERER_GENERAL_TLS_ROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
      ORDERER_ADMIN_LISTENADDRESS: 0.0.0.0:9443
      ORDERER_ADMIN_TLS_ENABLED: "true"
      ORDERER_ADMIN_TLS_CERTIFICATE: /var/hyperledger/admin-tls/server.crt
      ORDERER_ADMIN_TLS_PRIVATEKEY: /var/hyperledger/admin-tls/server.key
      ORDERER_ADMIN_TLS_CLIENTROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
      ORDERER_ADMIN_TLS_CLIENTAUTHREQUIRED: "true"
      ORDERER_CHANNELPARTICIPATION_ENABLED: "true"
      ORDERER_GENERAL_BOOTSTRAPMETHOD: none
      ORDERER_METRICS_PROVIDER: prometheus
      ORDERER_OPERATIONS_LISTENADDRESS: 0.0.0.0:9444
      ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY: /var/hyperledger/tls/server.key
      ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE: /var/hyperledger/tls/server.crt
      ORDERER_GENERAL_CLUSTER_ROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
    ports:
      - "9050:9050"
      - "9443:9443"
    volumes:
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp1.bench.local/orderers/orderer3.opp1.bench.local/msp:/var/hyperledger/msp
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp1.bench.local/orderers/orderer3.opp1.bench.local/tls:/var/hyperledger/tls
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp1.bench.local/orderers/orderer3.opp1.bench.local/tls:/var/hyperledger/admin-tls
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci1.bench.local/orderers/orderer1.eci1.bench.local/tls/ca.crt:/var/hyperledger/tls/eci1-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci2.bench.local/orderers/orderer2.eci2.bench.local/tls/ca.crt:/var/hyperledger/tls/eci2-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp1.bench.local/orderers/orderer3.opp1.bench.local/tls/ca.crt:/var/hyperledger/tls/opp1-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp2.bench.local/orderers/orderer4.opp2.bench.local/tls/ca.crt:/var/hyperledger/tls/opp2-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/civ1.bench.local/orderers/orderer5.civ1.bench.local/tls/ca.crt:/var/hyperledger/tls/civ1-ca.crt:ro
    networks: [benchnet]

  orderer4.opp2.bench.local:
    image: hyperledger/fabric-orderer:3.1.1
    container_name: orderer4.opp2.bench.local
    environment:
      ORDERER_GENERAL_LISTENADDRESS: 0.0.0.0
      ORDERER_GENERAL_LISTENPORT: "10050"
      ORDERER_GENERAL_LOCALMSPID: OPP2MSP
      ORDERER_GENERAL_LOCALMSPDIR: /var/hyperledger/msp
      ORDERER_GENERAL_TLS_ENABLED: "true"
      ORDERER_GENERAL_TLS_PRIVATEKEY: /var/hyperledger/tls/server.key
      ORDERER_GENERAL_TLS_CERTIFICATE: /var/hyperledger/tls/server.crt
      ORDERER_GENERAL_TLS_ROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
      ORDERER_ADMIN_LISTENADDRESS: 0.0.0.0:9443
      ORDERER_ADMIN_TLS_ENABLED: "true"
      ORDERER_ADMIN_TLS_CERTIFICATE: /var/hyperledger/admin-tls/server.crt
      ORDERER_ADMIN_TLS_PRIVATEKEY: /var/hyperledger/admin-tls/server.key
      ORDERER_ADMIN_TLS_CLIENTROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
      ORDERER_ADMIN_TLS_CLIENTAUTHREQUIRED: "true"
      ORDERER_CHANNELPARTICIPATION_ENABLED: "true"
      ORDERER_GENERAL_BOOTSTRAPMETHOD: none
      ORDERER_METRICS_PROVIDER: prometheus
      ORDERER_OPERATIONS_LISTENADDRESS: 0.0.0.0:9444
      ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY: /var/hyperledger/tls/server.key
      ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE: /var/hyperledger/tls/server.crt
      ORDERER_GENERAL_CLUSTER_ROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
    ports:
      - "10050:10050"
      - "10443:9443"
    volumes:
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp2.bench.local/orderers/orderer4.opp2.bench.local/msp:/var/hyperledger/msp
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp2.bench.local/orderers/orderer4.opp2.bench.local/tls:/var/hyperledger/tls
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp2.bench.local/orderers/orderer4.opp2.bench.local/tls:/var/hyperledger/admin-tls
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci1.bench.local/orderers/orderer1.eci1.bench.local/tls/ca.crt:/var/hyperledger/tls/eci1-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci2.bench.local/orderers/orderer2.eci2.bench.local/tls/ca.crt:/var/hyperledger/tls/eci2-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp1.bench.local/orderers/orderer3.opp1.bench.local/tls/ca.crt:/var/hyperledger/tls/opp1-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp2.bench.local/orderers/orderer4.opp2.bench.local/tls/ca.crt:/var/hyperledger/tls/opp2-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/civ1.bench.local/orderers/orderer5.civ1.bench.local/tls/ca.crt:/var/hyperledger/tls/civ1-ca.crt:ro
    networks: [benchnet]

  orderer5.civ1.bench.local:
    image: hyperledger/fabric-orderer:3.1.1
    container_name: orderer5.civ1.bench.local
    environment:
      ORDERER_GENERAL_LISTENADDRESS: 0.0.0.0
      ORDERER_GENERAL_LISTENPORT: "11050"
      ORDERER_GENERAL_LOCALMSPID: CIV1MSP
      ORDERER_GENERAL_LOCALMSPDIR: /var/hyperledger/msp
      ORDERER_GENERAL_TLS_ENABLED: "true"
      ORDERER_GENERAL_TLS_PRIVATEKEY: /var/hyperledger/tls/server.key
      ORDERER_GENERAL_TLS_CERTIFICATE: /var/hyperledger/tls/server.crt
      ORDERER_GENERAL_TLS_ROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
      ORDERER_ADMIN_LISTENADDRESS: 0.0.0.0:9443
      ORDERER_ADMIN_TLS_ENABLED: "true"
      ORDERER_ADMIN_TLS_CERTIFICATE: /var/hyperledger/admin-tls/server.crt
      ORDERER_ADMIN_TLS_PRIVATEKEY: /var/hyperledger/admin-tls/server.key
      ORDERER_ADMIN_TLS_CLIENTROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
      ORDERER_ADMIN_TLS_CLIENTAUTHREQUIRED: "true"
      ORDERER_CHANNELPARTICIPATION_ENABLED: "true"
      ORDERER_GENERAL_BOOTSTRAPMETHOD: none
      ORDERER_METRICS_PROVIDER: prometheus
      ORDERER_OPERATIONS_LISTENADDRESS: 0.0.0.0:9444
      ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY: /var/hyperledger/tls/server.key
      ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE: /var/hyperledger/tls/server.crt
      ORDERER_GENERAL_CLUSTER_ROOTCAS: '[/var/hyperledger/tls/eci1-ca.crt,/var/hyperledger/tls/eci2-ca.crt,/var/hyperledger/tls/opp1-ca.crt,/var/hyperledger/tls/opp2-ca.crt,/var/hyperledger/tls/civ1-ca.crt]'
    ports:
      - "11050:11050"
      - "11443:9443"
    volumes:
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/civ1.bench.local/orderers/orderer5.civ1.bench.local/msp:/var/hyperledger/msp
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/civ1.bench.local/orderers/orderer5.civ1.bench.local/tls:/var/hyperledger/tls
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/civ1.bench.local/orderers/orderer5.civ1.bench.local/tls:/var/hyperledger/admin-tls
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci1.bench.local/orderers/orderer1.eci1.bench.local/tls/ca.crt:/var/hyperledger/tls/eci1-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/eci2.bench.local/orderers/orderer2.eci2.bench.local/tls/ca.crt:/var/hyperledger/tls/eci2-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp1.bench.local/orderers/orderer3.opp1.bench.local/tls/ca.crt:/var/hyperledger/tls/opp1-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/opp2.bench.local/orderers/orderer4.opp2.bench.local/tls/ca.crt:/var/hyperledger/tls/opp2-ca.crt:ro
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/ordererOrganizations/civ1.bench.local/orderers/orderer5.civ1.bench.local/tls/ca.crt:/var/hyperledger/tls/civ1-ca.crt:ro
    networks: [benchnet]

  # ==================== PEERS (1 per app org) ====================
  peer0.eci.bench.local:
    image: hyperledger/fabric-peer:3.1.1
    container_name: peer0.eci.bench.local
    environment:
      CORE_PEER_ID: peer0.eci.bench.local
      CORE_PEER_ADDRESS: peer0.eci.bench.local:7051
      CORE_PEER_LISTENADDRESS: 0.0.0.0:7051
      CORE_PEER_LOCALMSPID: ECIMSP
      CORE_PEER_MSPCONFIGPATH: /var/hyperledger/msp
      CORE_LEDGER_STATE_STATEDATABASE: goleveldb
      CORE_OPERATIONS_LISTENADDRESS: 0.0.0.0:9445
      CORE_METRICS_PROVIDER: prometheus
      CORE_PEER_TLS_ENABLED: "true"
      CORE_PEER_TLS_CERT_FILE: /var/hyperledger/tls/server.crt
      CORE_PEER_TLS_KEY_FILE: /var/hyperledger/tls/server.key
      CORE_PEER_TLS_ROOTCERT_FILE: /var/hyperledger/tls/ca.crt
      CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE: benchnet
    ports:
      - "7051:7051"
    volumes:
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/peerOrganizations/eci.bench.local/peers/peer0.eci.bench.local/msp:/var/hyperledger/msp
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/peerOrganizations/eci.bench.local/peers/peer0.eci.bench.local/tls:/var/hyperledger/tls
    networks: [benchnet]

  peer0.opp.bench.local:
    image: hyperledger/fabric-peer:3.1.1
    container_name: peer0.opp.bench.local
    environment:
      CORE_PEER_ID: peer0.opp.bench.local
      CORE_PEER_ADDRESS: peer0.opp.bench.local:8051
      CORE_PEER_LISTENADDRESS: 0.0.0.0:8051
      CORE_PEER_LOCALMSPID: OppMSP
      CORE_PEER_MSPCONFIGPATH: /var/hyperledger/msp
      CORE_LEDGER_STATE_STATEDATABASE: goleveldb
      CORE_OPERATIONS_LISTENADDRESS: 0.0.0.0:9446
      CORE_METRICS_PROVIDER: prometheus
      CORE_PEER_TLS_ENABLED: "true"
      CORE_PEER_TLS_CERT_FILE: /var/hyperledger/tls/server.crt
      CORE_PEER_TLS_KEY_FILE: /var/hyperledger/tls/server.key
      CORE_PEER_TLS_ROOTCERT_FILE: /var/hyperledger/tls/ca.crt
      CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE: benchnet
    ports:
      - "8051:8051"
    volumes:
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/peerOrganizations/opp.bench.local/peers/peer0.opp.bench.local/msp:/var/hyperledger/msp
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/peerOrganizations/opp.bench.local/peers/peer0.opp.bench.local/tls:/var/hyperledger/tls
    networks: [benchnet]

  peer0.civil.bench.local:
    image: hyperledger/fabric-peer:3.1.1
    container_name: peer0.civil.bench.local
    environment:
      CORE_PEER_ID: peer0.civil.bench.local
      CORE_PEER_ADDRESS: peer0.civil.bench.local:9051
      CORE_PEER_LISTENADDRESS: 0.0.0.0:9051
      CORE_PEER_LOCALMSPID: CivilMSP
      CORE_PEER_MSPCONFIGPATH: /var/hyperledger/msp
      CORE_LEDGER_STATE_STATEDATABASE: goleveldb
      CORE_OPERATIONS_LISTENADDRESS: 0.0.0.0:9447
      CORE_METRICS_PROVIDER: prometheus
      CORE_PEER_TLS_ENABLED: "true"
      CORE_PEER_TLS_CERT_FILE: /var/hyperledger/tls/server.crt
      CORE_PEER_TLS_KEY_FILE: /var/hyperledger/tls/server.key
      CORE_PEER_TLS_ROOTCERT_FILE: /var/hyperledger/tls/ca.crt
      CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE: benchnet
    ports:
      - "9051:9051"
    volumes:
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/peerOrganizations/civil.bench.local/peers/peer0.civil.bench.local/msp:/var/hyperledger/msp
      - /home/ubuntu/fab-election-bench/stacks/stack-v31-raft/crypto/peerOrganizations/civil.bench.local/peers/peer0.civil.bench.local/tls:/var/hyperledger/tls
    networks: [benchnet]

